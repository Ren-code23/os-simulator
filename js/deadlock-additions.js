
// Sample Data Functions for Deadlock
function loadDeadlockSample(sampleNum) {
    if (sampleNum === 1) {
        // Safe State Example
        document.getElementById('numProcesses').value = 5;
        document.getElementById('numResources').value = 3;
        numProcesses = 5;
        numResources = 3;
        
        // Allocation Matrix (Safe State)
        allocation = [
            [0, 1, 0],  // P0
            [2, 0, 0],  // P1
            [3, 0, 2],  // P2
            [2, 1, 1],  // P3
            [0, 0, 2]   // P4
        ];
        
        // Max Matrix
        max = [
            [7, 5, 3],  // P0
            [3, 2, 2],  // P1
            [9, 0, 2],  // P2
            [2, 2, 2],  // P3
            [4, 3, 3]   // P4
        ];
        
        // Available Resources
        available = [3, 3, 2];
        
        displayDeadlockMatrices();
        
    } else if (sampleNum === 2) {
        // Unsafe State Example
        document.getElementById('numProcesses').value = 4;
        document.getElementById('numResources').value = 3;
        numProcesses = 4;
        numResources = 3;
        
        // Allocation Matrix (Unsafe State)
        allocation = [
            [0, 1, 0],  // P0
            [3, 0, 2],  // P1
            [3, 0, 1],  // P2
            [2, 1, 1]   // P3
        ];
        
        // Max Matrix
        max = [
            [8, 4, 3],  // P0
            [6, 2, 3],  // P1
            [3, 3, 3],  // P2
            [4, 2, 2]   // P3
        ];
        
        // Available Resources
        available = [1, 0, 0];
        
        displayDeadlockMatrices();
        
    } else if (sampleNum === 3) {
        // Complex Example
        document.getElementById('numProcesses').value = 6;
        document.getElementById('numResources').value = 4;
        numProcesses = 6;
        numResources = 4;
        
        // Allocation Matrix
        allocation = [
            [0, 0, 1, 2],  // P0
            [1, 0, 0, 0],  // P1
            [1, 3, 5, 4],  // P2
            [0, 6, 3, 2],  // P3
            [0, 0, 1, 4],  // P4
            [1, 0, 1, 0]   // P5
        ];
        
        // Max Matrix
        max = [
            [0, 0, 1, 2],  // P0
            [1, 7, 5, 0],  // P1
            [2, 3, 5, 6],  // P2
            [0, 6, 5, 2],  // P3
            [0, 6, 5, 6],  // P4
            [1, 0, 1, 0]   // P5
        ];
        
        // Available Resources
        available = [1, 5, 2, 0];
        
        displayDeadlockMatrices();
    }
}

// Export Functions for Deadlock
function exportDeadlockResults() {
    const resultsDiv = document.getElementById('deadlockResults');
    if (!resultsDiv || resultsDiv.innerHTML.trim() === '') {
        alert('No results to export. Please run the algorithm first.');
        return;
    }
    
    let exportText = '========================================\n';
    exportText += 'DEADLOCK ALGORITHM RESULTS\n';
    exportText += 'Banker\'s Algorithm for Deadlock Avoidance\n';
    exportText += '========================================\n\n';
    
    exportText += 'Configuration:\n';
    exportText += `Number of Processes: ${numProcesses}\n`;
    exportText += `Number of Resources: ${numResources}\n\n`;
    
    exportText += 'Allocation Matrix:\n';
    allocation.forEach((row, i) => {
        exportText += `P${i}: [${row.join(', ')}]\n`;
    });
    exportText += '\n';
    
    exportText += 'Max Matrix:\n';
    max.forEach((row, i) => {
        exportText += `P${i}: [${row.join(', ')}]\n`;
    });
    exportText += '\n';
    
    exportText += `Available Resources: [${available.join(', ')}]\n\n`;
    
    exportText += resultsDiv.innerText;
    exportText += '\n\n========================================\n';
    exportText += 'Generated by OS Simulator\n';
    exportText += `Date: ${new Date().toLocaleString()}\n`;
    exportText += '========================================\n';
    
    downloadAsFile('deadlock-results.txt', exportText);
    
    const exportSection = document.getElementById('deadlockExport');
    if (exportSection) {
        exportSection.style.display = 'flex';
    }
}

function copyDeadlockResults() {
    const resultsDiv = document.getElementById('deadlockResults');
    if (!resultsDiv || resultsDiv.innerHTML.trim() === '') {
        alert('No results to copy. Please run the algorithm first.');
        return;
    }
    
    copyToClipboard(resultsDiv.innerText);
}

// Make functions global
window.loadDeadlockSample = loadDeadlockSample;
window.exportDeadlockResults = exportDeadlockResults;
window.copyDeadlockResults = copyDeadlockResults;

